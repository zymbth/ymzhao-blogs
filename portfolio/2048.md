---
description: 使用 vue 实现一个简单的 2048 游戏
head:
  - - meta
    - name: keywords
      content: js,vue,1024,2048,game,游戏
created: '2024-12-09'
---

# vue实现2048小游戏

## 演示

直接上demo：

<ClientOnly>
  <DemoIframe title="2048 game" src="https://play.vuejs.org/#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" />
</ClientOnly>

## 游戏规则

::: details 参考：[2048 (游戏) - 维基百科](https://zh.wikipedia.org/wiki/2048_(%E9%81%8A%E6%88%B2))

- 《2048》在4×4的网格上进行。玩家可以使用上、下、左、右四个方向键移动所有方块。但在部分情形下，某些方向不可移动。
- 游戏开始时，网格上会出现两个数值为2或4的方块。
- 每次移动后，另一个数值为2或4的新方块会随机出现在空方格上。
- 方块会沿着指定的方向滑动，直到被其它方块或网格边缘阻挡。
- 如果两个相同数值的方块碰撞，它们将合并成一个方块，其数值等于两个方块的数值之和。
- 如果三个数值相同的方块碰撞，则只会合并靠近终点方向的两个方块，距起点最近的方块的数值不变。
- 若一行或一列中的方块数值均相同，则沿着该行或该列滑动会合并前两个和后两个方块。
- 在同一移动过程中，新生成的方块不能再与其他方块合并。
- 数值较高的方块会发出柔和的光芒；但随着得分增加，光芒会不断变暗。
- 方块数值都是2的幂，最大为131072。
- 界面右上方的记分牌会记录玩家的分数。玩家的初始分数为零，每当两个方块合并时，分数会增加，得分取决于合并后方块的数值。

:::

游戏玩法就是上下左右操作，相应地滑动、合并、创建新块

完善游戏还有一些附加功能，比如计分、撤回、重新开始、游戏结束等，demo暂不考虑这些

## 分析

游戏数据是一个4*4的矩阵

对于一个左划操作：

- 滑动：将矩阵的每一行向左移动
- 合并：如果相邻的两个方块的值相同，合并成一个方块，只合并一次

对于其它方向的操作，可以通过矩阵的转置、反转来归为左划操作。完成数据处理后再转换回来即可

## 代码实现

完整demo见第一节的演示👆

- “行”的移动处理：

```js {7,8}
// 移动，例如：[2,undefined,2,2] -> [2,2,2,undefined]
function moveToLeft(row) {
  let count = 0
  // 遍历数组，将有效值依次从头(count)开始赋值到原数组上
  row.forEach((cell, colIdx) => {
    if (!cell) return
    row[colIdx] = undefined
    row[count++] = cell
  })
}
```

- “行”的合并处理：

```js {8,10-17}
// 合并，例如：[2,2,2,undefined] -> [4,2,undefined,undefined], [2,2,2,2] -> [4,4,undefined,undefined]
function mergeToLeft(row) {
  let count = 0
  // 遍历数组，连续两个相同有效值合并。将合并值或原值依次从头(count)开始赋值到原数组上
  for (let i = 0; i < row.length; i++) {
    const cell = row[i]
    if (!cell) continue
    row[i] = undefined
    // 合并
    if (cell === row[i + 1]) {
      row[i + 1] = undefined
      const newCell = cell * 2
      row[count++] = newCell
      i++
    } else {
      row[count++] = cell
    }
  }
}
```

其实完全可以一次遍历完成移动与合并，但可能会更复杂，难以理解

## JUST FOR FUN

最后，这是个人开发部署的一个在线[2048游戏](https://game2048.ymzhao.work/)
